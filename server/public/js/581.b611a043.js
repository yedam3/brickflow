"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[581],{3579:function(e,t,l){var a=l(6518),o=l(9565),r=l(2652),i=l(9306),d=l(8551),s=l(1767),n=l(9539),c=l(4549),h=c("some",TypeError);a({target:"Iterator",proto:!0,real:!0,forced:h},{some:function(e){d(this);try{i(e)}catch(a){n(this,"throw",a)}if(h)return o(h,this,e);var t=s(this),l=0;return r(t,(function(t,a){if(e(t,l++))return a()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},3590:function(e,t,l){l.d(t,{A:function(){return y}});var a=l(641),o=l(3751);const r={class:"ag-theme-alpine",style:{height:"400px",width:"100%"}},i={class:"d-flex justify-content-center me-5"},d={class:"input-group mb-3 w-50"};function s(e,t,l,s,n,c){const h=(0,a.g2)("CModalHeader"),u=(0,a.g2)("AgGridVue"),m=(0,a.g2)("CModalBody"),y=(0,a.g2)("CButton"),f=(0,a.g2)("CModalFooter"),p=(0,a.g2)("CModal");return(0,a.uX)(),(0,a.Wv)(p,{visible:l.visible,onClose:c.close,backdrop:"static",alignment:"center",size:"xl",style:{"min-width":"1000px"}},{default:(0,a.k6)((()=>[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.RG)(e.$slots,"header",{},(()=>[t[3]||(t[3]=(0,a.eW)("주문 목록"))]))])),_:3}),(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",r,[(0,a.Lk)("div",i,[(0,a.Lk)("div",d,[t[5]||(t[5]=(0,a.Lk)("select",{class:"form-select","aria-label":"Default select example"},[(0,a.Lk)("option",{value:"1",selected:""},"제품명"),(0,a.Lk)("option",{value:"2"},"주문명"),(0,a.Lk)("option",{value:"2"},"주문번호")],-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchText=t),placeholder:"검색어 입력",onKeydown:t[1]||(t[1]=(0,o.jR)(((...t)=>e.searchOrders&&e.searchOrders(...t)),["enter"])),class:"form-control w-50",style:{width:"30%"}},null,544),[[o.Jo,e.searchText]]),(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...t)=>e.searchMaterials&&e.searchMaterials(...t)),class:"btn btn-primary"},t[4]||(t[4]=[(0,a.Lk)("i",{class:"pi pi-search"},null,-1)]))])]),(0,a.bF)(u,{style:{width:"100%",height:"100%"},class:"ag-theme-alpine",columnDefs:n.columnDefs,rowData:n.rowData,gridOptions:n.gridOptions,onRowClicked:c.onRowClicked},null,8,["columnDefs","rowData","gridOptions","onRowClicked"])])])),_:1}),(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.RG)(e.$slots,"footer",{},(()=>[(0,a.bF)(y,{color:"secondary",onClick:c.close},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.eW)("닫기")]))),_:1},8,["onClick"])]))])),_:3})])),_:3},8,["visible","onClose"])}var n=l(7654),c=l(4335),h={name:"DeliveryModal",components:{AgGridVue:n.b},props:{visible:{type:Boolean,required:!0}},watch:{visible(e){e&&this.deliverytList()}},data(){return{rowData:[],columnDefs:[{field:"delivery_code",headerName:"출고번호",flex:1},{field:"delivery_name",headerName:"출고명",flex:1},{field:"delivery_date",headerName:"출고일자",flex:1},{field:"company_name",headerName:"업체명",flex:1},{field:"prod_name",headerName:"제품명",flex:2}],gridOptions:{domLayout:"autoHeight",suppressCellFocus:!0,pagination:!0,paginationPageSize:5,paginationPageSizeSelector:!1,defaultColDef:{suppressMovable:!0,resizable:!1,sortable:!1,cellStyle:{textAlign:"center"}}}}},methods:{close(){this.$emit("close")},async deliverytList(){await c.A.get("/api/sales/deliveryModal").then((e=>{this.rowData=e.data}))},onRowClicked(e){this.$emit("selectOrder",e.data),this.close()}}},u=l(6262);const m=(0,u.A)(h,[["render",s]]);var y=m},7360:function(e,t,l){l.d(t,{A:function(){return y}});var a=l(641),o=l(3751);const r={class:"ag-theme-alpine",style:{height:"400px",width:"100%"}},i={class:"d-flex justify-content-center me-5"},d={class:"input-group mb-3 w-50"};function s(e,t,l,s,n,c){const h=(0,a.g2)("CModalHeader"),u=(0,a.g2)("AgGridVue"),m=(0,a.g2)("CModalBody"),y=(0,a.g2)("CButton"),f=(0,a.g2)("CModalFooter"),p=(0,a.g2)("CModal");return(0,a.uX)(),(0,a.Wv)(p,{visible:l.visible,onClose:c.close,backdrop:"static",alignment:"center",size:"xl",style:{"min-width":"1000px"}},{default:(0,a.k6)((()=>[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.RG)(e.$slots,"header",{},(()=>[t[4]||(t[4]=(0,a.eW)("주문 목록"))]),!0)])),_:3}),(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",r,[(0,a.Lk)("div",i,[(0,a.Lk)("div",d,[(0,a.bo)((0,a.Lk)("select",{class:"form-select","onUpdate:modelValue":t[0]||(t[0]=e=>n.searchType=e),"aria-label":"Default select example"},t[5]||(t[5]=[(0,a.Lk)("option",{value:"prod_name",selected:""},"제품명",-1),(0,a.Lk)("option",{value:"order_name"},"주문명",-1),(0,a.Lk)("option",{value:"orders_code"},"주문번호",-1)]),512),[[o.u1,n.searchType]]),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>n.searchText=e),placeholder:"검색어 입력",onKeydown:t[2]||(t[2]=(0,o.jR)(((...e)=>c.searchOrders&&c.searchOrders(...e)),["enter"])),class:"form-control w-50",style:{width:"30%"}},null,544),[[o.Jo,n.searchText]]),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>c.searchOrders&&c.searchOrders(...e)),class:"btn btn-primary"},t[6]||(t[6]=[(0,a.Lk)("i",{class:"pi pi-search"},null,-1)]))])]),(0,a.bF)(u,{style:{width:"100%",height:"100%"},class:"ag-theme-alpine",columnDefs:n.columnDefs,rowData:n.rowData,gridOptions:n.gridOptions,onRowClicked:c.onRowClicked},null,8,["columnDefs","rowData","gridOptions","onRowClicked"])])])),_:1}),(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.RG)(e.$slots,"footer",{},(()=>[(0,a.bF)(y,{color:"secondary",onClick:c.close},{default:(0,a.k6)((()=>t[7]||(t[7]=[(0,a.eW)("닫기")]))),_:1},8,["onClick"])]),!0)])),_:3})])),_:3},8,["visible","onClose"])}var n=l(7654),c=l(4335),h={name:"OrderModal",components:{AgGridVue:n.b},props:{visible:{type:Boolean,required:!0}},watch:{visible(e){e&&this.orderList()}},data(){return{rowData:[],searchType:"prod_name",searchText:"",columnDefs:[{field:"orders_code",headerName:"주문번호",flex:1},{field:"order_name",headerName:"주문명",flex:1},{field:"orders_date",headerName:"주문일자",flex:1},{field:"del_date",headerName:"납기일자",flex:1},{field:"prod_name",headerName:"제품명",flex:2},{field:"finish_status",headerName:"상태",flex:1,valueFormatter:e=>"OS1"===e.value?"접수":"OS2"==e.value?"생산중":"OS3"==e.value?"출고대기":"OS4"==e.value?"출고완료":void 0,cellStyle:e=>"OS1"===e.value?{textAlign:"center",fontWeight:"bold",color:"#6c757d"}:"OS2"==e.value?{textAlign:"center",fontWeight:"bold",color:"#007bff"}:"OS3"==e.value?{textAlign:"center",fontWeight:"bold",color:"#fd7e14"}:"OS4"==e.value?{textAlign:"center",fontWeight:"bold",color:"#28a745"}:void 0}],gridOptions:{domLayout:"autoHeight",suppressCellFocus:!0,pagination:!0,paginationPageSize:5,paginationPageSizeSelector:!1,defaultColDef:{suppressMovable:!0,resizable:!1,sortable:!1,cellStyle:{textAlign:"center"}}}}},mounted(){this.orderList()},methods:{close(){this.$emit("close")},orderList(){c.A.get("/api/work/plan/orderList").then((e=>{this.rowData=e.data})).catch((e=>{console.error(e)}))},async searchOrders(){await c.A.get("/api/work/plan/orderList",{params:{type:this.searchType,keyword:this.searchText}}).then((e=>{this.rowData=e.data})).catch((e=>console.error(e)))},onRowClicked(e){console.log(e.data),this.$emit("selectOrder",e.data),this.close()}}},u=l(6262);const m=(0,u.A)(h,[["render",s],["__scopeId","data-v-6c434894"]]);var y=m},8237:function(e,t,l){var a=l(6518),o=l(2652),r=l(9306),i=l(8551),d=l(1767),s=l(9539),n=l(4549),c=l(8745),h=l(9039),u=TypeError,m=h((function(){[].keys().reduce((function(){}),void 0)})),y=!m&&n("reduce",u);a({target:"Iterator",proto:!0,real:!0,forced:m||y},{reduce:function(e){i(this);try{r(e)}catch(h){s(this,"throw",h)}var t=arguments.length<2,l=t?void 0:arguments[1];if(y)return c(y,this,t?[e]:[e,l]);var a=d(this),n=0;if(o(a,(function(a){t?(t=!1,l=a):l=e(l,a,n),n++}),{IS_RECORD:!0}),t)throw new u("Reduce of empty iterator with no initial value");return l}})},8452:function(e,t,l){l.d(t,{A:function(){return y}});var a=l(641),o=l(3751);const r={class:"ag-theme-alpine",style:{height:"400px",width:"100%"}},i={class:"d-flex justify-content-end me-5"},d={class:"input-group mb-3 w-50"};function s(e,t,l,s,n,c){const h=(0,a.g2)("CModalHeader"),u=(0,a.g2)("AgGridVue"),m=(0,a.g2)("CModalBody"),y=(0,a.g2)("CButton"),f=(0,a.g2)("CModalFooter"),p=(0,a.g2)("CModal");return(0,a.uX)(),(0,a.Wv)(p,{visible:l.visible,onClose:c.close,backdrop:"static",alignment:"center",size:"xl",style:{"min-width":"1000px"}},{default:(0,a.k6)((()=>[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.RG)(e.$slots,"header",{},(()=>[t[4]||(t[4]=(0,a.eW)("업체 목록"))]),!0)])),_:3}),(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",r,[(0,a.Lk)("div",i,[(0,a.Lk)("div",d,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchType=e),class:"form-select","aria-label":"Default select example"},t[5]||(t[5]=[(0,a.Lk)("option",{value:"company_code",selected:""},"업체코드",-1),(0,a.Lk)("option",{value:"company_name"},"업체명",-1)]),512),[[o.u1,n.searchType]]),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>n.searchText=e),placeholder:"검색어 입력",class:"form-control w-50",style:{width:"30%"},onKeydown:t[2]||(t[2]=(0,o.jR)(((...e)=>c.searchMaterials&&c.searchMaterials(...e)),["enter"]))},null,544),[[o.Jo,n.searchText]]),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>c.searchMaterials&&c.searchMaterials(...e)),class:"btn btn-primary"},t[6]||(t[6]=[(0,a.Lk)("i",{class:"pi pi-search"},null,-1)]))])]),(0,a.bF)(u,{style:{width:"100%",height:"100%"},class:"ag-theme-alpine",columnDefs:n.columnDefs,rowData:n.rowData,gridOptions:n.gridOptions,onRowClicked:c.clicked},null,8,["columnDefs","rowData","gridOptions","onRowClicked"])])])),_:1}),(0,a.bF)(f,null,{default:(0,a.k6)((()=>[(0,a.RG)(e.$slots,"footer",{},(()=>[(0,a.bF)(y,{color:"secondary",onClick:c.close},{default:(0,a.k6)((()=>t[7]||(t[7]=[(0,a.eW)("닫기")]))),_:1},8,["onClick"])]),!0)])),_:3})])),_:3},8,["visible","onClose"])}var n=l(7654),c=l(4335),h={name:"ComModal",components:{AgGridVue:n.b},props:{visible:{type:Boolean,required:!0}},data(){return{rowData:[],searchType:"company_name",searchText:"",columnDefs:[{field:"company_code",headerName:"업체코드",flex:1},{field:"company_name",headerName:"업체명",flex:1},{field:"tel",headerName:"전화번호",flex:1},{field:"address",headerName:"주소",flex:1}],gridOptions:{domLayout:"autoHeight",singleClickEdit:!0,suppressRowClickSelection:!0,pagination:!0,paginationPageSize:5,paginationPageSizeSelector:!1,overlayNoRowsTemplate:"표시할 값이 없습니다.",defaultColDef:{suppressMovable:!0,resizable:!1,sortable:!1,cellStyle:{textAlign:"center"}}}}},mounted(){this.matList()},methods:{close(){this.$emit("close")},matList(){c.A.get("/api/sales/comList").then((e=>{this.rowData=e.data})).catch((e=>{console.error(e)}))},searchMaterials(){c.A.get("/api/sales/comList",{params:{type:this.searchType,keyword:this.searchText}}).then((e=>{this.rowData=e.data})).catch((e=>{console.error(e)}))},clicked(e){this.$emit("selectCom",e.data),this.close()}}},u=l(6262);const m=(0,u.A)(h,[["render",s],["__scopeId","data-v-b9a8af06"]]);var y=m},8745:function(e,t,l){var a=l(616),o=Function.prototype,r=o.apply,i=o.call;e.exports="object"==typeof Reflect&&Reflect.apply||(a?i.bind(r):function(){return i.apply(r,arguments)})},9581:function(e,t,l){l.r(t),l.d(t,{default:function(){return k}});var a=l(8452),o=l(7360),r=l(3590),i=l(5122),d=l(641);const s={class:"card border-0",style:{height:"calc(50vh - 5rem)"}},n={class:"text-end mt-3 mb-3"},c={class:"row"},h={class:"col"},u={class:"card border-0",style:{height:"calc(50vh - 5rem)"}},m={class:"col"},y={class:"card border-0",style:{height:"calc(50vh - 5rem)"}};function f(e,t,l,f,p,v){const w=i.A,_=(0,d.g2)("ag-grid-vue"),g=r.A,D=o.A,x=a.A;return(0,d.uX)(),(0,d.CE)(d.FK,null,[(0,d.Lk)("div",s,[t[3]||(t[3]=(0,d.Lk)("h2",null,"영업 관리",-1)),t[4]||(t[4]=(0,d.Lk)("div",{class:"heading-with-line"},[(0,d.Lk)("h5",{class:"m-0 me-3"},"출고 관리")],-1)),(0,d.Lk)("div",n,[(0,d.bF)(w,{label:"출고조회",severity:"success",class:"me-3",onClick:v.deliverytList},null,8,["onClick"]),(0,d.bF)(w,{label:"주문조회",severity:"success",class:"me-3",onClick:v.orderList},null,8,["onClick"]),(0,d.bF)(w,{label:"등록",severity:"info",class:"me-3",onClick:v.addDelivery},null,8,["onClick"]),(0,d.bF)(w,{label:"수정",severity:"help",class:"me-3",onClick:v.modifyOrder},null,8,["onClick"]),(0,d.bF)(w,{label:"삭제",severity:"danger",class:"me-5",onClick:v.deliveryDelete},null,8,["onClick"])]),(0,d.bF)(_,{class:"ag-theme-alpine",style:{width:"100%",height:"150px"},columnDefs:p.columnDefs,rowData:p.rowData,gridOptions:e.gridOptions,defaultColDef:e.defaultColDef,onCellClicked:v.comCellClicked},null,8,["columnDefs","rowData","gridOptions","defaultColDef","onCellClicked"])]),(0,d.Lk)("div",c,[(0,d.Lk)("div",h,[(0,d.Lk)("div",u,[t[5]||(t[5]=(0,d.Lk)("div",{class:"heading-with-line mb-5"},[(0,d.Lk)("h5",{class:"m-0 me-3"},"주문 요구 수량")],-1)),(0,d.bF)(_,{class:"ag-theme-alpine",style:{width:"100%",height:"200px"},columnDefs:p.seColumnDefs,rowData:p.serowData,gridOptions:e.gridOptions,defaultColDef:e.defaultColDef,onRowClicked:v.selectedProd},null,8,["columnDefs","rowData","gridOptions","defaultColDef","onRowClicked"])])]),(0,d.Lk)("div",m,[(0,d.Lk)("div",y,[t[6]||(t[6]=(0,d.Lk)("div",{class:"heading-with-line mb-5"},[(0,d.Lk)("h5",{class:"m-0 me-3"},"출고 가능 수량")],-1)),(0,d.bF)(_,{class:"ag-theme-alpine",style:{width:"100%",height:"200px"},columnDefs:p.thColumnDefs,rowData:p.throwData,gridOptions:e.gridOptions,defaultColDef:e.defaultColDef,onCellValueChanged:v.throwChange},null,8,["columnDefs","rowData","gridOptions","defaultColDef","onCellValueChanged"])])])]),(0,d.bF)(g,{ref:"deliveryModal",visible:p.showDeliveryModal,onClose:t[0]||(t[0]=e=>p.showDeliveryModal=!1),onSelectOrder:v.deliveryOrderSelected},null,8,["visible","onSelectOrder"]),(0,d.bF)(D,{ref:"orderModal",visible:p.showOrderModal,onClose:t[1]||(t[1]=e=>p.showOrderModal=!1),onSelectOrder:v.orderSelected},null,8,["visible","onSelectOrder"]),(0,d.bF)(x,{visible:p.showComModal,rowSelection:"multiple",onClose:t[2]||(t[2]=e=>p.showComModal=!1),onSelectCom:v.comSelected},null,8,["visible","onSelectCom"])],64)}l(4114),l(8111),l(8237),l(3579);var p=l(7654),v=l(4335),w=l(8465),_=l.n(w),g=l(4783),D={components:{AgGridVue:p.b,OrderModal:o.A,ProdComModal:a.A,Swal:_(),DeliveryModal:r.A},data(){return{rowData:[{delivery_code:"",delivery_name:"",orders_code:"",order_name:"",company_name:"",employee_code:(0,g.k)().id,emp_name:(0,g.k)().empName}],columnDefs:[{field:"delivery_code",headerName:"출고코드",hide:!0},{field:"delivery_name",headerName:"출고명",flex:3,editable:!0},{field:"orders_code",headerName:"주문코드",flex:3},{field:"order_name",headerName:"주문명",flex:3,editable:!1},{field:"company_name",headerName:"업체명",flex:3},{field:"employee_code",headerName:"사원코드",flex:3,hide:!0},{field:"emp_name",headerName:"담당자",flex:3}],serowData:[],selectedSerowIndex:null,seColumnDefs:[{field:"prod_code",headerName:"제품코드",flex:2,cellStyle:{textAlign:"center"}},{field:"prod_name",headerName:"제품명",flex:2,editable:!1,cellStyle:{textAlign:"center"}},{field:"delivery_demand",headerName:"요구량",flex:2,cellStyle:{textAlign:"center"}},{field:"delivery_detail_code",headerName:"상세코드",flex:2,cellStyle:{textAlign:"center"}},{field:"alreadydelivery",headerName:"기납기량",flex:2,cellStyle:{textAlign:"center"}},{field:"yetdelivery",headerName:"미납기량",flex:2,editable:!1,cellStyle:{textAlign:"center"}},{field:"delivery_quantity",headerName:"출고량",flex:2,cellStyle:{textAlign:"center"}}],throwData:[],thColumnDefs:[{field:"prod_LOT",headerName:"제품LOT",flex:2,cellStyle:{textAlign:"center"}},{field:"prod_code",headerName:"제품코드",flex:2,editable:!0,cellStyle:{textAlign:"center"}},{field:"prod_name",headerName:"제품명",flex:2,cellStyle:{textAlign:"center"}},{field:"delivery_before_quantity",headerName:"출고 가능 수량",flex:2,cellStyle:{textAlign:"center"}},{field:"delivery_quantity",headerName:"출고수량",flex:2,editable:!0,cellStyle:{textAlign:"center"}}],showDeliveryModal:!1,showOrderModal:!1,showComModal:!1,selectedRowIndexes:[],selectedSecondIndex:null}},mounted(){},methods:{async autosalescode(){const e=await v.A.get("/api/sales/comList");this.rowData[0].sales_order_code=e.data[0].sales_order_code},comCellClicked(e){"company_name"==e.colDef.field&&(this.showComModal=!0)},comSelected(e){this.rowData[0].company_code=e.company_code,this.rowData[0].company_name=e.company_name},deliverytList(){this.showDeliveryModal=!0},async deliveryOrderSelected(e){await v.A.get(`/api/sales/orders/${e.orders_code}`).then((t=>{console.log(t.data);let l=t.data;for(let a of l)a.delivery_code=e.delivery_code,a.delivery_name=e.delivery_name,a.company_name=e.company_name,a.company_code=e.company_code,a.yetdelivery=a.yetdelivery+a.delivery_quantity,a.alreadydelivery=a.alreadydelivery-a.delivery_quantity;this.rowData=[...l]})).catch((e=>console.log(e))),await v.A.get(`/api/sales/deldetail/${e.orders_code}/${e.delivery_code}`).then((e=>{const t=e.data;console.log(t),this.serowData=[];for(let l of t)this.serowData.push({prod_code:l.prod_code,prod_name:l.prod_name,delivery_demand:l.delivery_demand,alreadydelivery:Number(l.alreadydelivery)-Number(l.delivery_quantity),yetdelivery:Number(l.yetdelivery)+Number(l.delivery_quantity),delivery_detail_code:l.delivery_detail_code,delivery_quantity:l.delivery_quantity});this.throwData=[],this.serowData=[...this.serowData]}))},orderList(){this.showOrderModal=!0},async orderSelected(e){await v.A.get(`/api/sales/orders/${e.orders_code}`).then((e=>{let t=e.data;for(let l of t)l.delivery_name="",l.delivery_code="",l.employee_code="";this.rowData=[...t]})).catch((e=>console.log(e))),await v.A.get(`/api/sales/detail/${e.orders_code}`).then((e=>{const t=e.data;this.serowData=[];for(let l of t)this.serowData.push({prod_code:l.prod_code,prod_name:l.prod_name,delivery_demand:l.delivery_demand,alreadydelivery:l.alreadydelivery,yetdelivery:l.yetdelivery,delivery_quantity:0});this.throwData=[],this.serowData=[...this.serowData]}))},fullCheck(){if(""==this.rowData[0].orders_code||""==this.rowData[0].delivery_name||""==this.rowData[0].company_name)return console.log("ddd"+this.rowData[0].delivery_name),_().fire({title:"실패",text:"해당하는 값을 입력해주십시오.",icon:"error",confirmButtonText:"확인"}),1;for(let e of this.serowData)if(""==e.prod_code)return _().fire({title:"실패",text:"값을 다입력하십시오",icon:"error",confirmButtonText:"확인"}),1;return this.serowData.some((e=>e.delivery_quantity>0))?void 0:(_().fire({title:"실패",text:"값을 다입력하십시오",icon:"error",confirmButtonText:"확인"}),1)},async addDelivery(){1!=this.fullCheck()&&2!=this.fullCheck()&&(this.serowData[0].delivery_detail_code?_().fire({title:"실패",text:"수정 버튼을 클릭하세요",icon:"error",confirmButtonText:"확인"}):(console.log(this.serowData),v.A.post("/api/sales/deliveryAdd",{delivery:this.rowData[0],deliveryDetail:this.serowData}).then((e=>{e.data.affectedRows>0?(_().fire({title:"등록 성공",text:"정상적으로 등록이 완료되었습니다.",icon:"success",confirmButtonText:"확인"}),this.rowData=[{delivery_code:"",delivery_name:"",orders_code:"",order_name:"",company_name:""}],this.serowData=[],this.throwData=[]):_().fire({title:"등록 실패",text:"등록이 실패하였습니다..",icon:"error",confirmButtonText:"확인"})})).catch((e=>{console.error(e),_().fire({title:"등록 실패",text:"알수 없는 오류가 발생하였습니다..",icon:"error",confirmButtonText:"확인"})}))))},async selectedProd(e){if(this.selectedSecondIndex=e.rowIndex,console.log(e.data),void 0==e.data.lotList||null==e.data.lotList){const t=await v.A.get(`/api/sales/deliveryCheck/${e.data.prod_code}/${e.data.delivery_detail_code}`),l=t.data;let a=[];for(let e of l)a.push({prod_LOT:e.prod_LOT,prod_code:e.prod_code,prod_name:e.prod_name,delivery_before_quantity:Number(e.delivery_before_quantity)+Number(this.serowData[this.selectedSecondIndex].delivery_quantity),delivery_quantity:0});e.data.lotList=a,this.throwData=a}else this.throwData=e.data.lotList},async throwChange(e){let t=e.rowIndex;this.throwData[t].delivery_quantity=e.data.delivery_quantity;let l=this.throwData.reduce(((e,t)=>(console.log(t.delivery_quantity),e+Number(t.delivery_quantity))),0);if(l>this.serowData[this.selectedSecondIndex].yetdelivery)return this.$nextTick((()=>{_().fire({title:"출고 수량 초과",text:"요구 수량을 초과할 수 없습니다.",icon:"error",confirmButtonText:"확인"})})),this.throwData[t].delivery_quantity=0,this.serowData[this.selectedSecondIndex].delivery_quantity=0,void(this.throwData=[...this.throwData]);this.serowData[this.selectedSecondIndex].delivery_quantity=l,this.serowData=[...this.serowData]},async modifyOrder(){1!=this.fullCheck()&&2!=this.fullCheck()&&(this.serowData[0].delivery_detail_code?(console.log("보내는 데이터",{delivery:this.rowData[0],deliveryDetail:this.serowData}),await v.A.put("/api/sales/deliveryModify",{delivery:this.rowData[0],deliveryDetail:this.serowData}).then((e=>{e.data.affectedRows>0?_().fire({title:"수정 완료",text:"수정이 완료되었습니다.",icon:"success",confirmButtonText:"확인"}):_().fire({title:"수정 실패",text:"수정을 실패하였습니다.",icon:"error",confirmButtonText:"확인"})})).catch((e=>{console.error(e),_().fire({title:"수정 실패",text:"알수 없는 에러.",icon:"error",confirmButtonText:"확인"})})),this.rowData=[{delivery_code:"",delivery_name:"",orders_code:"",order_name:"",company_name:""}],this.serowData=[],this.throwData=[]):_().fire({title:"실패",text:"수정 버튼을 클릭하세요",icon:"error",confirmButtonText:"확인"}))},async deliveryDelete(){console.log("세로우"),console.log(this.serowData),await v.A.post("/api/sales/deliveryDelete/",{deliverycode:this.rowData[0].delivery_code,deliveryDetail:this.serowData}).then((e=>{e.data.affectedRows>0?(_().fire({title:"삭제 완료",text:"정상적으로 삭제가 완료되었습니다.",icon:"success",confirmButtonText:"확인"}),this.rowData=[{delivery_code:"",delivery_name:"",orders_code:"",order_name:"",company_name:""}],this.serowData=[]):_().fire({title:"삭제 실패",text:"삭제 실패 하였습니다.",icon:"error",confirmButtonText:"확인"})})).catch((e=>console.log(e)))}}},x=l(6262);const b=(0,x.A)(D,[["render",f]]);var k=b}}]);
//# sourceMappingURL=581.b611a043.js.map