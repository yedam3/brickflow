"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[580],{8580:function(e,t,s){s.r(t),s.d(t,{default:function(){return U}});var o=s(5122),r=s(641),i=s(33);const c={class:"card border-0",style:{"min-height":"calc(100vh - 8rem)"}},n={class:"container"},d={class:"row g-3"},l={class:"col-md-4"},a={class:"p-3 border rounded d-flex align-items-center card-mode"},u={class:"col-md-4"},f={class:"p-3 border rounded d-flex align-items-center card-mode"},p={class:"col-md-4"},k={class:"p-3 border rounded d-flex align-items-center card-mode"},_={class:"row g-3 mt-2"},h={class:"col-md-4"},m={class:"p-3 border rounded d-flex align-items-center card-mode"},v={class:"col-md-4"},L={class:"p-3 border rounded d-flex align-items-center card-mode"},y={class:"col-md-4"},b={class:"p-3 border rounded d-flex align-items-center card-mode"},I={class:"container mt-3"},w={class:"row g-5"},x={class:"col-md-2"},g={class:"p-3 border rounded d-flex align-items-center card-mode"},q={class:"col-md-2"},F={class:"p-3 border rounded d-flex align-items-center card-mode"},C={class:"col-md-2"},S={class:"p-3 border rounded d-flex align-items-center card-mode"},T={class:"col-md-3"},B={class:"p-3 border rounded d-flex align-items-center card-mode"},K={class:"col-md-3"},$={class:"p-3 border rounded d-flex align-items-center card-mode"},D={class:"container mt-4"},A={class:"row row-cols-1 row-cols-md-3 g-4"},E={class:"col"},W={class:"col"},X={class:"col"},z={class:"container d-flex justify-content-center mt-5"},j={class:"card p-3",style:{width:"600px"}},M={class:"row row-cols-3 g-2 text-center"},N=["onClick"],H={class:"d-flex justify-content-center mt-4 gap-3"};function P(e,t,s,P,Y,G){const J=o.A;return(0,r.uX)(),(0,r.CE)("div",c,[t[31]||(t[31]=(0,r.Lk)("h3",null,"공정 진행 관리",-1)),t[32]||(t[32]=(0,r.Lk)("div",{class:"heading-with-line mb-2"},[(0,r.Lk)("h5",{class:"m-0 me-3"},"제어")],-1)),(0,r.Lk)("div",n,[(0,r.Lk)("div",d,[(0,r.Lk)("div",l,[(0,r.Lk)("div",a,[t[7]||(t[7]=(0,r.Lk)("i",{class:"bi bi-gear-fill fs-4 me-3 text-primary"},null,-1)),(0,r.Lk)("div",null,[t[6]||(t[6]=(0,r.Lk)("div",{class:"fw-bold"},"공정명",-1)),(0,r.Lk)("div",null,(0,i.v_)(this.processInfo.process_name),1)])])]),(0,r.Lk)("div",u,[(0,r.Lk)("div",f,[t[9]||(t[9]=(0,r.Lk)("i",{class:"bi bi-cpu fs-4 me-3 text-success"},null,-1)),(0,r.Lk)("div",null,[t[8]||(t[8]=(0,r.Lk)("div",{class:"fw-bold"},"설비명",-1)),(0,r.Lk)("div",null,(0,i.v_)(this.processInfo.model_name),1)])])]),(0,r.Lk)("div",p,[(0,r.Lk)("div",k,[t[11]||(t[11]=(0,r.Lk)("i",{class:"bi bi-box-seam fs-4 me-3 text-info"},null,-1)),(0,r.Lk)("div",null,[t[10]||(t[10]=(0,r.Lk)("div",{class:"fw-bold"},"제품명",-1)),(0,r.Lk)("div",null,(0,i.v_)(this.processInfo.prod_name),1)])])])]),(0,r.Lk)("div",_,[(0,r.Lk)("div",h,[(0,r.Lk)("div",m,[t[13]||(t[13]=(0,r.Lk)("i",{class:"bi bi-person-circle fs-4 me-3 text-dark"},null,-1)),(0,r.Lk)("div",null,[t[12]||(t[12]=(0,r.Lk)("div",{class:"fw-bold"},"작업자명",-1)),(0,r.Lk)("div",null,(0,i.v_)(this.processInfo.emp_name),1)])])]),(0,r.Lk)("div",v,[(0,r.Lk)("div",L,[t[15]||(t[15]=(0,r.Lk)("i",{class:"bi bi-check2-all fs-4 me-3 text-success"},null,-1)),(0,r.Lk)("div",null,[t[14]||(t[14]=(0,r.Lk)("div",{class:"fw-bold"},"기작업량",-1)),(0,r.Lk)("div",null,(0,i.v_)(this.processInfo.processed_quantity),1)])])]),(0,r.Lk)("div",y,[(0,r.Lk)("div",b,[t[17]||(t[17]=(0,r.Lk)("i",{class:"bi bi-x-circle fs-4 me-3 text-danger"},null,-1)),(0,r.Lk)("div",null,[t[16]||(t[16]=(0,r.Lk)("div",{class:"fw-bold"},"미작업량",-1)),(0,r.Lk)("div",null,(0,i.v_)(this.processInfo.unprocessed_quantity),1)])])])])]),(0,r.Lk)("div",I,[(0,r.Lk)("div",w,[(0,r.Lk)("div",x,[(0,r.Lk)("div",g,[t[19]||(t[19]=(0,r.Lk)("i",{class:"bi bi-gear-fill fs-4 me-3 text-primary"},null,-1)),(0,r.Lk)("div",null,[t[18]||(t[18]=(0,r.Lk)("div",{class:"fw-bold"},"투입량",-1)),(0,r.Lk)("div",null,(0,i.v_)(this.processInfo.input_quantity),1)])])]),(0,r.Lk)("div",q,[(0,r.Lk)("div",F,[t[21]||(t[21]=(0,r.Lk)("i",{class:"bi bi-cpu fs-4 me-3 text-success"},null,-1)),(0,r.Lk)("div",null,[t[20]||(t[20]=(0,r.Lk)("div",{class:"fw-bold"},"불량량",-1)),(0,r.Lk)("div",null,(0,i.v_)(this.processInfo.error_quantity),1)])])]),(0,r.Lk)("div",C,[(0,r.Lk)("div",S,[t[23]||(t[23]=(0,r.Lk)("i",{class:"bi bi-box-seam fs-4 me-3 text-info"},null,-1)),(0,r.Lk)("div",null,[t[22]||(t[22]=(0,r.Lk)("div",{class:"fw-bold"},"생산량",-1)),(0,r.Lk)("div",null,(0,i.v_)(this.processInfo.created_quantity),1)])])]),(0,r.Lk)("div",T,[(0,r.Lk)("div",B,[t[25]||(t[25]=(0,r.Lk)("i",{class:"bi bi-person-circle fs-4 me-3 text-dark"},null,-1)),(0,r.Lk)("div",null,[t[24]||(t[24]=(0,r.Lk)("div",{class:"fw-bold"},"작업시작일시",-1)),(0,r.Lk)("div",null,(0,i.v_)(""===this.processInfo.work_start_date?"X":this.processInfo.work_start_date),1)])])]),(0,r.Lk)("div",K,[(0,r.Lk)("div",$,[t[27]||(t[27]=(0,r.Lk)("i",{class:"bi bi-x-circle fs-4 me-3 text-danger"},null,-1)),(0,r.Lk)("div",null,[t[26]||(t[26]=(0,r.Lk)("div",{class:"fw-bold"},"작업종료일",-1)),(0,r.Lk)("div",null,(0,i.v_)(""===this.processInfo.work_end_date?"X":this.processInfo.work_start_date),1)])])])])]),(0,r.Lk)("div",D,[(0,r.Lk)("div",A,[(0,r.Lk)("div",E,[(0,r.Lk)("div",{class:(0,i.C4)(["card h-100 card-mode border-info",{"":"input_quantity"!==Y.focusedField,"bg-info text-white fw-bold border-3 border-info":"input_quantity"===Y.focusedField}])},[(0,r.Lk)("div",{class:"card-body",onClick:t[0]||(t[0]=e=>G.setFocus("input_quantity"))},[t[28]||(t[28]=(0,r.Lk)("h5",{class:"card-title"},"투입량",-1)),(0,r.eW)(" "+(0,i.v_)("input_quantity"===Y.focusedField?Y.currentInput:Y.processInfo.input_quantity),1)])],2)]),(0,r.Lk)("div",W,[(0,r.Lk)("div",{class:(0,i.C4)(["card h-100 card-mode border-warning",{"":"error_quantity"!==Y.focusedField,"bg-warning text-white fw-bold border-3 border-warning":"error_quantity"===Y.focusedField}])},[(0,r.Lk)("div",{class:"card-body",onClick:t[1]||(t[1]=e=>G.setFocus("error_quantity"))},[t[29]||(t[29]=(0,r.Lk)("h5",{class:"card-title"},"불량량",-1)),(0,r.eW)(" "+(0,i.v_)("error_quantity"===Y.focusedField?Y.currentInput:Y.processInfo.error_quantity),1)])],2)]),(0,r.Lk)("div",X,[(0,r.Lk)("div",{class:(0,i.C4)(["card h-100 border-success card-mode",{"":"created_quantity"!==Y.focusedField,"bg-success text-white fw-bold border-3 border-success":"created_quantity"===Y.focusedField}])},[(0,r.Lk)("div",{class:"card-body",onClick:t[2]||(t[2]=e=>G.setFocus("created_quantity"))},[t[30]||(t[30]=(0,r.Lk)("h5",{class:"card-title"},"생산량",-1)),(0,r.eW)(" "+(0,i.v_)("created_quantity"===Y.focusedField?Y.currentInput:Y.processInfo.created_quantity),1)])],2)])])]),(0,r.Lk)("div",z,[(0,r.Lk)("div",j,[(0,r.Lk)("div",M,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(["1","2","3","4","5","6","7","8","9"],(e=>(0,r.Lk)("div",{class:"col border py-3 keypad",key:e,onClick:t=>G.handleKey(e)},(0,i.v_)(e),9,N))),64)),(0,r.Lk)("div",{class:"col border py-3 keypad-backspace",onClick:t[3]||(t[3]=e=>G.handleKey("<"))}," < "),(0,r.Lk)("div",{class:"col border py-3 keypad-zero",onClick:t[4]||(t[4]=e=>G.handleKey("0"))}," 0 "),(0,r.Lk)("div",{class:"col border py-3 keypad-enter",onClick:t[5]||(t[5]=e=>G.handleKey("✓"))}," ✓ ")])])]),(0,r.Lk)("div",H,[(0,r.bF)(J,{label:"작업 시작",severity:"primary",class:"",size:"large",style:{width:"20rem",height:"5rem"},onClick:G.processStart},null,8,["onClick"]),(0,r.bF)(J,{label:"작업 종료",severity:"info",class:"",size:"large",style:{width:"20rem",height:"5rem"},onClick:G.processEnd},null,8,["onClick"])])])}s(4114);var Y=s(4335),G=s(8465),J=s.n(G),O={components:{},data(){return{work_lot:null,emp_code:null,fac_code:null,focusedField:null,currentInput:null,pressedKey:null,processInfo:{work_lot:"",process_code:"",process_name:"",fac_code:"",model_name:"",prod_code:"",prod_name:"",emp_code:"",emp_name:"",processed_quantity:"",unprocessed_quantity:"",order_quantity:"",input_quantity:"",error_quantity:"",created_quantity:"",process_sequence:"",work_start_date:"",work_end_date:""}}},watch(){},mounted(){const e=this.$route.query;"undefined"!==typeof e.work_lot&&(this.processInfo.work_lot=e.work_lot,this.processInfo.emp_code=e.emp_code,this.processInfo.fac_code=e.fac_code,this.displayLoad())},methods:{setFocus(e){null!==this.processInfo.work_start_date&&""!==this.processInfo.work_start_date||"error_quantity"!=e?null!==this.processInfo.work_start_date&&""!==this.processInfo.work_start_date||"created_quantity"!=e?null===this.processInfo.work_start_date||""===this.processInfo.work_start_date||"input_quantity"!=e?this.focusedField==e?this.focusedField=null:(this.focusedField=e,this.currentInput=0===this.processInfo[e]?"":this.processInfo[e].toString()):J().fire({title:"오류",text:"작업 시작 이후에는 투입 수량을 입력할 수 없습니다.",icon:"error",confirmButtonText:"확인"}):J().fire({title:"오류",text:"작업 시작 이전에는 생산 수량을 입력할 수 없습니다.",icon:"error",confirmButtonText:"확인"}):J().fire({title:"오류",text:"작업 시작 이전에는 불량 수량을 입력할 수 없습니다.",icon:"error",confirmButtonText:"확인"})},handleKey(e){"<"===e?this.backspace():"✓"===e?this.confirmInput():this.appendNumber(e),this.pressedKey=e,setTimeout((()=>{this.pressedKey=null}),300)},appendNumber(e){this.focusedField&&(this.currentInput+=e)},backspace(){this.focusedField&&(this.currentInput=this.currentInput.slice(0,-1))},confirmInput(){if(this.focusedField){const e=parseInt(this.currentInput)||0;this.processInfo[this.focusedField]=e,this.focusedField=null,this.currentInput=""}},getKeyStyle(e){return this.pressedKey===e.toString()?{cursor:"pointer",backgroundColor:"#0d6efd",color:"white",fontWeight:"bold",border:"3px solid #0d6efd",boxShadow:"0 0 10px rgba(13, 110, 253, 0.5)",transition:"all 0.1s ease-in-out"}:{backgroundColor:"0"===e?"#212529":"white",color:"0"===e?"white":"black"}},async displayLoad(){let e=this.processInfo.work_lot;console.log(this.processInfo),await Y.A.get("/api/work/process/select",{params:{work_lot:this.processInfo.work_lot,emp_code:this.processInfo.emp_code,fac_code:this.processInfo.fac_code}}).then((t=>{console.log(t.data),console.log(this.processInfo),this.processInfo=t.data,this.processInfo.work_lot=e})).catch((e=>console.error(e)))},async processStart(){0!==this.processInfo.input_quantity?this.processInfo.input_quantity<=0?J().fire({title:"오류",text:"투입량은 0이 될 수 없습니다.",icon:"error",confirmButtonText:"확인"}):this.processInfo.input_quantity>this.processInfo.unprocessed_quantity?J().fire({title:"오류",text:"투입량은 미작업량을 초과할 수 없습니다.",icon:"error",confirmButtonText:"확인"}):this.processInfo.work_start_date?J().fire({title:"오류",text:"해당 작업은 이미 시작된 상태입니다.",icon:"error",confirmButtonText:"확인"}):await Y.A.post("/api/work/process/start",{work_lot:this.processInfo.work_lot,fac_code:this.processInfo.fac_code,employee_code:this.processInfo.emp_code,input_quantity:this.processInfo.input_quantity}).then((e=>{const t=new Date;this.processInfo.work_start_date=this.formatDate(t),0===e.data[1][0].result_code?(J().fire({title:"성공",text:"작업이 문제 없이 시작되었습니다.",icon:"success",confirmButtonText:"확인"}),this.processInfo["created_quantity"]=this.processInfo["input_quantity"]-this.processInfo[["error_quantity"]]):J().fire({title:"오류",text:"작업 시작에 실패했습니다.",icon:"error",confirmButtonText:"확인"})})).catch((e=>{console.error(e),J().fire({title:"오류",text:"작업 시작 과정에서 오류가 발생했습니다.",icon:"error",confirmButtonText:"확인"})})):J().fire({title:"오류",text:"투입량을 기입하세요.",icon:"error",confirmButtonText:"확인"})},async processEnd(){this.processInfo.work_start_date?this.processInfo.input_quantity<this.processInfo.error_quantity+this.processInfo.created_quantity?J().fire({title:"오류",text:"불량 수량과 생산 수량의 합계가 투입 수량보다 많습니다.",icon:"error",confirmButtonText:"확인"}):this.processInfo.input_quantity>this.processInfo.error_quantity+this.processInfo.created_quantity?J().fire({title:"오류",text:"불량 수량과 생산 수량의 합이 투입 수량보다 적습니다.",icon:"error",confirmButtonText:"확인"}):await Y.A.post("/api/work/process/end",{work_lot:this.processInfo.work_lot,fac_code:this.processInfo.fac_code,employee_code:this.processInfo.emp_code,error_quantity:this.processInfo.error_quantity,created_quantity:this.processInfo.created_quantity}).then((e=>{const t=new Date;this.processInfo.work_end_date=this.formatDate(t),0===e.data[1][0].result_code?(J().fire({title:"성공",text:"작업이 문제 없이 종료되었습니다.",icon:"success",confirmButtonText:"확인"}),this.$router.push({name:"Process"})):J().fire({title:"오류",text:"작업 종료에 실패했습니다.",icon:"error",confirmButtonText:"확인"})})).catch((e=>{console.error(e),J().fire({title:"오류",text:"작업 종료 과정에서 오류가 발생했습니다.",icon:"error",confirmButtonText:"확인"})})):J().fire({title:"오류",text:"작업이 시작되지 않은 상태에서는 종료가 불가능합니다.",icon:"error",confirmButtonText:"확인"})},formatDate(e){const t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),r=String(e.getHours()).padStart(2,"0"),i=String(e.getMinutes()).padStart(2,"0"),c=String(e.getSeconds()).padStart(2,"0");return`${t}-${s}-${o} ${r}:${i}:${c}`}}},Q=s(6262);const R=(0,Q.A)(O,[["render",P]]);var U=R}}]);
//# sourceMappingURL=580.ae989a83.js.map