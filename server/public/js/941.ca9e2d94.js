"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[941],{4941:function(e,o,a){a.r(o),a.d(o,{default:function(){return B}});var t=a(5122),n=a(641),i=a(3751),c=a(33);const l={class:"card border-0 h-100"},s={class:"text-end mt-3 mb-3",style:{"padding-right":"4%"}},d={class:"row"},r={class:"com-grid col"},p={class:"card border-0 col",style:{width:"700px",height:"500px","background-color":"#F5F5F5"}},m={class:"row"},u={class:"input-group mb-5 col"},f={class:"input-group mb-5 col"},y={class:"row"},b={class:"input-group mb-5 col"},h={class:"input-group mb-5 col"},x={class:"row"},_={class:"input-group mb-5 col"},k={class:"input-group mb-5 col"},v=["value"];function g(e,o,a,g,L,C){const w=t.A,D=(0,n.g2)("ag-grid-vue");return(0,n.uX)(),(0,n.CE)("div",l,[o[15]||(o[15]=(0,n.Lk)("div",{class:"font-semibold text-xl mb-4"},"업체 관리",-1)),(0,n.Lk)("div",s,[(0,n.bF)(w,{label:"초기화",severity:"success",class:"me-3",onClick:C.comReset},null,8,["onClick"]),(0,n.bF)(w,{label:"등록",severity:"info",class:"me-3",onClick:C.comSave},null,8,["onClick"]),(0,n.bF)(w,{label:"수정",severity:"help",class:"me-3",onClick:C.comUpdate},null,8,["onClick"]),(0,n.bF)(w,{label:"삭제",severity:"danger",class:"me-3",onClick:C.comDelete},null,8,["onClick"])]),(0,n.Lk)("div",d,[(0,n.Lk)("div",r,[o[6]||(o[6]=(0,n.Lk)("h5",null,"업체목록",-1)),(0,n.bF)(D,{style:{width:"860px",height:"500px"},class:"ag-theme-alpine",columnDefs:L.columnDefs,rowData:L.rowData,gridOptions:L.gridOptions,defaultColDef:e.defaultColDef,onCellClicked:C.comellClicked},null,8,["columnDefs","rowData","gridOptions","defaultColDef","onCellClicked"])]),(0,n.Lk)("div",p,[o[14]||(o[14]=(0,n.Lk)("h5",null,"업체상세",-1)),(0,n.Lk)("div",m,[(0,n.Lk)("div",u,[o[7]||(o[7]=(0,n.Lk)("span",{class:"input-group-text",id:"basic-addon1"},"업체코드",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",placeholder:"업체코드","aria-label":"Username","aria-describedby":"basic-addon1","onUpdate:modelValue":o[0]||(o[0]=e=>L.info.company_code=e),readonly:""},null,512),[[i.Jo,L.info.company_code]])]),(0,n.Lk)("div",f,[o[8]||(o[8]=(0,n.Lk)("span",{class:"input-group-text",id:"basic-addon1"},"업체명",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",placeholder:"업체명","aria-label":"Username","aria-describedby":"basic-addon1","onUpdate:modelValue":o[1]||(o[1]=e=>L.info.company_name=e)},null,512),[[i.Jo,L.info.company_name]])])]),(0,n.Lk)("div",y,[(0,n.Lk)("div",b,[o[9]||(o[9]=(0,n.Lk)("span",{class:"input-group-text",id:"basic-addon1"},"위치",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",placeholder:"위치","aria-label":"Username","aria-describedby":"basic-addon1","onUpdate:modelValue":o[2]||(o[2]=e=>L.info.address=e)},null,512),[[i.Jo,L.info.address]])]),(0,n.Lk)("div",h,[o[10]||(o[10]=(0,n.Lk)("span",{class:"input-group-text",id:"basic-addon1"},"연락처",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",placeholder:"연락처","aria-label":"Username","aria-describedby":"basic-addon1","onUpdate:modelValue":o[3]||(o[3]=e=>L.info.tel=e)},null,512),[[i.Jo,L.info.tel]])])]),(0,n.Lk)("div",x,[(0,n.Lk)("div",_,[o[11]||(o[11]=(0,n.Lk)("span",{class:"input-group-text",id:"basic-addon1"},"담당자",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",placeholder:"담당자","aria-label":"Username","aria-describedby":"basic-addon1","onUpdate:modelValue":o[4]||(o[4]=e=>L.info.emp_code=e)},null,512),[[i.Jo,L.info.emp_code]])]),(0,n.Lk)("div",k,[o[13]||(o[13]=(0,n.Lk)("span",{class:"input-group-text",id:"basic-addon1"},"업체타입",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select col","aria-label":"Default select example","onUpdate:modelValue":o[5]||(o[5]=e=>L.info.company_type=e)},[o[12]||(o[12]=(0,n.Lk)("option",{disabled:"",selected:"",value:""},"업체타입",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(L.companyListAry,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e.sub_code,value:e.sub_code},(0,c.v_)(e.sub_code_name),9,v)))),128))],512),[[i.u1,L.info.company_type]])])])])])])}var L=a(7654),C=a(4335),w=a(8465),D=a.n(w),T={components:{AgGridVue:L.b,Swal:D()},data(){return{rowData:[{company_code:"",company_name:"",address:"",tel:"",emp_code:"",company_type:""}],columnDefs:[{field:"company_code",headerName:"업체코드",flex:3},{field:"company_name",headerName:"업체명",flex:3},{field:"address",headerName:"위치",flex:6},{field:"tel",headerName:"연락처",flex:3},{field:"emp_code",headerName:"담당자",flex:2},{field:"company_type",headerName:"업체타입",flex:2,valueFormatter:e=>"CT1"==e.value?e.value="입고업체":"CT2"==e.value?e.value="판매업체":"CT3"==e.value?e.value="설비수리업체":"CT4"==e.value?e.value="설비구매업체":void 0}],gridOptions:{pagination:!0,paginationPageSize:10,paginationPageSizeSelector:[5,10,20,50],overlayNoRowsTemplate:"표시할 값이 없습니다.",defaultColDef:{suppressMovable:!0,resizable:!1,sortable:!1,onGridReady:function(e){e.api.sizeColumnsToFit()}}},selectedSecondIndex:null,prodIndex:null,info:{company_code:"",company_name:"",address:"",tel:"",emp_code:"",company_type:""},companyListAry:[],selectedSecondIndex:null,prodIndex:null}},async mounted(){await this.companyData(),await this.companyList()},methods:{async companyData(){try{const e=await C.A.get("/api/admin/company");this.rowData=e.data}catch(e){console.log("데이터 조회 실패",e)}},comellClicked(e){let o=e.data.company_code;this.prodIndex=e.rowIndex,C.A.get("/api/admin/company/"+o).then((e=>{console.log(e),this.info=e.data[0]})).catch((e=>{console.error(e)})),console.log(e)},async companyList(){await C.A.get("/api/admin/comTypeList").then((e=>{console.log(e.data),this.companyListAry=e.data}))},async comSave(){for(let e in this.info)if(""==e.company_name||""==e.address||""==e.tel||""==e.emp_code||""==e.company_type)return void D().fire({title:"실패",text:"값을 다 입력해주세요",icon:"error",confirmButtonText:"확인"});console.log(this.rowData[this.prodIndex]);await C.A.post("/api/admin/comSave",{insertCom:this.info}).then((e=>{e.data.affectedRows>0?(D().fire({title:"등록 성공",text:"정상적으로 등록이 완료되었습니다.",icon:"success",confirmButtonText:"확인"}),this.info={}):D().fire({title:"등록 실패",text:"등록이 실패하였습니다..",icon:"error",confirmButtonText:"확인"})})).catch((e=>{console.error(e),D().fire({title:"등록 실패",text:"알수 없는 오류가 발생하였습니다..",icon:"error",confirmButtonText:"확인"})}));this.info={company_code:"",company_name:"",address:"",tel:"",emp_code:"",company_type:""},await this.companyData(),this.info={...this.info}},async comUpdate(){let e=this.checkValue();1!=e&&(""!=this.info.emp_code?(await C.A.put("/api/admin/comUpdate",this.info).then((e=>{e.data.affectedRows>0?(D().fire({title:"수정 완료",text:"수정이 완료되었습니다.",icon:"success",confirmButtonText:"확인"}),this.companyData(),this.info={company_code:"",company_name:"",address:"",tel:"",emp_code:"",company_type:""}):D().fire({title:"수정 실패",text:"수정을 실패하였습니다.",icon:"error",confirmButtonText:"확인"})})).catch((e=>{console.error(e),D().fire({title:"수정 실패",text:"알수 없는 에러.",icon:"error",confirmButtonText:"확인"})})),this.info=[{company_code:"",company_name:"",address:"",tel:"",emp_code:"",company_type:""}]):D().fire({title:"수정 불가",text:"업체코드가 필요합니다.",icon:"error",confirmButtonText:"확인"}))},async comDelete(){""!=this.info.company_code?(await C.A.delete("/api/admin/comDelete/"+this.info.company_code).then((e=>{e.data.affectedRows>0?(D().fire({title:"삭제 성공",text:"정상적으로 삭제되었습니다.",icon:"success",confirmButtonText:"확인"}),this.companyData(),this.info={company_code:"",company_name:"",address:"",tel:"",emp_code:"",company_type:""}):D().fire({title:"삭제 실패",text:"삭제를 실패하였습니다.",icon:"error",confirmButtonText:"확인"})})).catch((e=>{console.error(e),D().fire({title:"삭제 실패",text:"알수 없는 에러.",icon:"error",confirmButtonText:"확인"})})),this.info=[{company_code:"",company_name:"",address:"",tel:"",emp_code:"",company_type:""}]):D().fire({title:"삭제 실패",text:"삭제코드가 필요합니다.",icon:"error",confirmButtonText:"확인"})},comReset(){this.info=[]}}},U=a(6262);const A=(0,U.A)(T,[["render",g],["__scopeId","data-v-0bd5f0b9"]]);var B=A}}]);
//# sourceMappingURL=941.ca9e2d94.js.map