"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[256],{2256:function(e,o,a){a.r(o),a.d(o,{default:function(){return v}});var t=a(5122),r=a(641),l=a(3751);const s={class:"ag-theme-alpine p-4",style:{"background-color":"white","min-height":"800px"}},n={class:"card shadow-sm mb-4 p-4"},i={class:"row g-3"},d={class:"col-md-4"},c={class:"col-md-4"},p={class:"col-md-4"},u={class:"col-md-4"},m={class:"col-md-4"},f={class:"col-md-4"},h={class:"col-md-4"},w={class:"d-flex justify-content-end mt-4 gap-3"};function b(e,o,a,b,k,g){const y=t.A,_=(0,r.g2)("ag-grid-vue");return(0,r.uX)(),(0,r.CE)("div",s,[(0,r.Lk)("div",n,[o[15]||(o[15]=(0,r.Lk)("h5",{class:"mb-4"},"제품 등록",-1)),(0,r.Lk)("div",i,[(0,r.Lk)("div",d,[o[8]||(o[8]=(0,r.Lk)("label",{class:"form-label"},"제품코드",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=e=>k.rowData.prod_code=e)},null,512),[[l.Jo,k.rowData.prod_code]])]),(0,r.Lk)("div",c,[o[9]||(o[9]=(0,r.Lk)("label",{class:"form-label"},"제품명",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=e=>k.rowData.prod_name=e)},null,512),[[l.Jo,k.rowData.prod_name]])]),(0,r.Lk)("div",p,[o[10]||(o[10]=(0,r.Lk)("label",{class:"form-label"},"단위",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[2]||(o[2]=e=>k.rowData.unit=e)},null,512),[[l.Jo,k.rowData.unit]])]),(0,r.Lk)("div",u,[o[11]||(o[11]=(0,r.Lk)("label",{class:"form-label"},"무게",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[3]||(o[3]=e=>k.rowData.weight=e)},null,512),[[l.Jo,k.rowData.weight]])]),(0,r.Lk)("div",m,[o[12]||(o[12]=(0,r.Lk)("label",{class:"form-label"},"크기",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[4]||(o[4]=e=>k.rowData.size=e)},null,512),[[l.Jo,k.rowData.size]])]),(0,r.Lk)("div",f,[o[13]||(o[13]=(0,r.Lk)("label",{class:"form-label"},"단위별 수량",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[5]||(o[5]=e=>k.rowData.by_unit_number=e)},null,512),[[l.Jo,k.rowData.by_unit_number]])]),(0,r.Lk)("div",h,[o[14]||(o[14]=(0,r.Lk)("label",{class:"form-label"},"적정재고",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number",class:"form-control",min:"0","onUpdate:modelValue":o[6]||(o[6]=e=>k.rowData.proper_store=e),onKeydown:o[7]||(o[7]=(...e)=>g.allowOnlyNumber&&g.allowOnlyNumber(...e))},null,544),[[l.Jo,k.rowData.proper_store]])])]),(0,r.Lk)("div",w,[(0,r.bF)(y,{label:"초기화",severity:"secondary",class:"me-3",onClick:g.Allrest},null,8,["onClick"]),(0,r.bF)(y,{label:"등록",severity:"info",class:"me-3",onClick:g.addprod},null,8,["onClick"]),(0,r.bF)(y,{label:"수정",severity:"warning",class:"me-3",onClick:g.updateprod},null,8,["onClick"]),(0,r.bF)(y,{label:"삭제",severity:"danger",class:"me-3",onClick:g.deleteProd},null,8,["onClick"])])]),(0,r.bF)(_,{class:"ag-theme-alpine custom-grid-theme",style:{width:"100%",height:"300px"},columnDefs:k.columnDefs,rowData:k.rowData2,gridOptions:k.gridOptions,onRowClicked:g.clicked},null,8,["columnDefs","rowData","gridOptions","onRowClicked"])])}var k=a(7654),g=a(4335),y=a(8465),_=a.n(y),D={components:{AgGridVue:k.b,Swal:_()},data(){return{rowData:{prod_code:"",prod_name:"",unit:"",by_unit_number:"",proper_store:"",size:"",weight:""},rowData2:[{prod_code:"",prod_name:"",unit:"",by_unit_number:"",size:"",weight:"",proper_store:""}],columnDefs:[{field:"prod_code",headerName:"제품코드",flex:3},{field:"prod_name",headerName:"제품명",flex:3},{field:"unit",headerName:"단위",flex:3},{field:"by_unit_number",headerName:"단위별 수량",flex:3},{field:"size",headerName:"크기",flex:3},{field:"weight",headerName:"무게",flex:3},{field:"proper_store",headerName:"적정 재고",flex:3}],gridOptions:{domLayout:"autoHeight",singleClickEdit:!0,suppressRowClickSelection:!0,pagination:!0,paginationPageSize:5,paginationPageSizeSelector:!1,overlayNoRowsTemplate:"표시할 값이 없습니다.",defaultColDef:{suppressMovable:!0,resizable:!1,sortable:!1,cellStyle:{textAlign:"center"}}}}},mounted(){this.prodList(),this.autoProdCode()},methods:{Allrest(){this.rowData={prod_code:"",prod_name:"",unit:"",by_unit_number:"",proper_store:"",size:"",weight:""}},clicked(e){console.log("클릭된 행 데이터:",e.data),this.rowData=e.data},async autoProdCode(){g.A.get("/api/admin/autoProdCode").then((e=>{const o=e.data;this.rowData=o})).catch((e=>{console.error("prod_code 요류 요청:",e)}))},allowOnlyNumber(e){const o=["Backspace","Tab","ArrowLeft","ArrowRight","Delete","Home","End"],a=e.key>="0"&&e.key<="9";a||o.includes(e.key)||e.preventDefault()},async prodList(){await g.A.get("/api/admin/Prod").then((e=>{console.log(e.data),this.rowData2=e.data}))},async addprod(){const e=await g.A.post("/api/admin/prodinput",this.rowData).catch((e=>(console.error("등록 실패:",e),this.autoProdCode(),_().fire("등록 실패","제품 등록 중 오류가 발생했습니다.","error"),null)));e&&e.data&&e.data.affectedRows>0?_().fire("등록성공","정상적으로 등록되었습니다.","success").then((()=>{this.prodList(),this.Allrest(),this.autoProdCode()})):e&&_().fire("등록 실패","등록이 실패하였습니다.","error")},async updateprod(){g.A.put("/api/admin/updateProd",{prod:this.rowData}).then((e=>{e&&e.data&&e.data.affectedRows>0?_().fire("수정 완료","제품정보가 수정되었습니다.","success").then((()=>{this.prodList(),this.Allrest(),this.autoProdCode()})):_().fire("수정 실패","제품정보 수정에 실패했습니다.","error")})).catch((e=>{console.error("수정 실패:",e),_().fire("오류 발생","제품정보 수정 중 오류가 발생했습니다.","error")}))},async deleteProd(){this.rowData.prod_code?_().fire({title:"정말 삭제하시겠습니까?",text:`제품 코드: ${this.rowData.prod_code}`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"삭제",cancelButtonText:"취소"}).then((e=>{e.isConfirmed&&g.A.delete(`/api/admin/resetProd/${this.rowData.prod_code}`).then((e=>{e&&e.data&&e.data.affectedRows>0?_().fire("삭제 완료","자재정보가 삭제되었습니다.","success").then((()=>{this.Allrest(),this.prodList()})):_().fire("삭제 실패","자재 삭제에 실패했습니다.","error")})).catch((e=>{console.error("삭제 오류:",e),_().fire("오류 발생","삭제 중 오류가 발생했습니다.","error")}))})):_().fire("삭제불가","삭제할 제품을 선택하세요","warning")}}},L=a(6262);const C=(0,L.A)(D,[["render",b],["__scopeId","data-v-2b244b6d"]]);var v=C}}]);
//# sourceMappingURL=256.f621addd.js.map