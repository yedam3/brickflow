"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[357],{6357:function(e,a,t){t.r(a),t.d(a,{default:function(){return C}});var o=t(5122),l=t(641),r=t(3751);const s={class:"ag-theme-alpine p-4",style:{"background-color":"white","min-height":"800px"}},n={class:"card shadow-sm mb-4 p-4"},i={class:"row g-3"},c={class:"col-md-4"},d={class:"col-md-4"},m={class:"col-md-4"},u={class:"col-md-4"},f={class:"col-md-4"},p={class:"col-md-4"},h={class:"col-md-4"},w={class:"col-md-4"},b={class:"d-flex justify-content-end mt-4 gap-3"};function k(e,a,t,k,y,D){const L=o.A,g=(0,l.g2)("ag-grid-vue");return(0,l.uX)(),(0,l.CE)("div",s,[(0,l.Lk)("div",n,[a[17]||(a[17]=(0,l.Lk)("h5",{class:"mb-4"},"자재 등록",-1)),(0,l.Lk)("div",i,[(0,l.Lk)("div",c,[a[9]||(a[9]=(0,l.Lk)("label",{class:"form-label"},"자재코드",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=e=>y.rowData.mat_code=e),readonly:""},null,512),[[r.Jo,y.rowData.mat_code]])]),(0,l.Lk)("div",d,[a[10]||(a[10]=(0,l.Lk)("label",{class:"form-label"},"자재명",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[1]||(a[1]=e=>y.rowData.mat_name=e)},null,512),[[r.Jo,y.rowData.mat_name]])]),(0,l.Lk)("div",m,[a[11]||(a[11]=(0,l.Lk)("label",{class:"form-label"},"단위",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[2]||(a[2]=e=>y.rowData.unit=e)},null,512),[[r.Jo,y.rowData.unit]])]),(0,l.Lk)("div",u,[a[12]||(a[12]=(0,l.Lk)("label",{class:"form-label"},"크기",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[3]||(a[3]=e=>y.rowData.size=e)},null,512),[[r.Jo,y.rowData.size]])]),(0,l.Lk)("div",f,[a[13]||(a[13]=(0,l.Lk)("label",{class:"form-label"},"색상",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[4]||(a[4]=e=>y.rowData.color=e)},null,512),[[r.Jo,y.rowData.color]])]),(0,l.Lk)("div",p,[a[14]||(a[14]=(0,l.Lk)("label",{class:"form-label"},"재질",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[5]||(a[5]=e=>y.rowData.texture=e)},null,512),[[r.Jo,y.rowData.texture]])]),(0,l.Lk)("div",h,[a[15]||(a[15]=(0,l.Lk)("label",{class:"form-label"},"모양",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[6]||(a[6]=e=>y.rowData.shape=e)},null,512),[[r.Jo,y.rowData.shape]])]),(0,l.Lk)("div",w,[a[16]||(a[16]=(0,l.Lk)("label",{class:"form-label"},"안전재고",-1)),(0,l.bo)((0,l.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":a[7]||(a[7]=e=>y.rowData.safe_inventory=e),min:"0",onKeydown:a[8]||(a[8]=(...e)=>D.allowOnlyNumber&&D.allowOnlyNumber(...e))},null,544),[[r.Jo,y.rowData.safe_inventory]])])]),(0,l.Lk)("div",b,[(0,l.bF)(L,{label:"초기화",severity:"secondary",onClick:D.clearForm},null,8,["onClick"]),(0,l.bF)(L,{label:"등록",severity:"info",onClick:D.addMat},null,8,["onClick"]),(0,l.bF)(L,{label:"수정",severity:"warning"}),(0,l.bF)(L,{label:"삭제",severity:"danger"})])]),(0,l.bF)(g,{class:"ag-theme-alpine custom-grid-theme",style:{width:"100%",height:"300px"},columnDefs:y.columnDefs,rowData:y.rowData2,gridOptions:y.gridOptions,onRowClicked:e.clicked},null,8,["columnDefs","rowData","gridOptions","onRowClicked"])])}var y=t(7654),D=t(4335),L=t(8465),g=t.n(L),v={components:{AgGridVue:y.b},data(){return{rowData:{mat_code:"",mat_name:"",unit:"",size:"",color:"",texture:"",shape:"",safe_inventory:""},rowData2:[{mat_code:"",mat_name:"",unit:"",size:"",color:"",texture:"",shape:"",safe_inventory:""}],columnDefs:[{field:"mat_code",headerName:"자재코드",flex:3},{field:"mat_name",headerName:"자재명",flex:3},{field:"unit",headerName:"단위",flex:3},{field:"size",headerName:"크기",flex:3},{field:"color",headerName:"색상",flex:3},{field:"texture",headerName:"재질",flex:3},{field:"shape",headerName:"모양",flex:3},{field:"safe_inventory",headerName:"안전 재고",flex:3}],gridOptions:{domLayout:"autoHeight",singleClickEdit:!0,suppressRowClickSelection:!0,pagination:!0,paginationPageSize:5,paginationPageSizeSelector:!1,overlayNoRowsTemplate:"표시할 값이 없습니다.",defaultColDef:{suppressMovable:!0,resizable:!1,sortable:!1,cellStyle:{textAlign:"center"}}}}},mounted(){this.matList(),this.autoMatCode()},methods:{allowOnlyNumber(e){const a=["Backspace","Tab","ArrowLeft","ArrowRight","Delete","Home","End"],t=e.key>="0"&&e.key<="9";t||a.includes(e.key)||e.preventDefault()},async autoMatCode(){const e=await D.A.get("/api/admin/autoMatCode");this.rowData.mat_code=e.data[0].mat_code},clearForm(){this.rowData={mat_code:"",mat_name:"",unit:"",size:"",color:"",texture:"",shape:"",safe_inventory:""}},async matList(){await D.A.get("/api/admin/mat").then((e=>{console.log(e.data),this.rowData2=e.data}))},async addMat(){const e=await D.A.post("/api/admin/mat",this.rowData).catch((e=>(console.error("등록 실패:",e),g().fire("등록 실패","자재 등록 중 오류가 발생했습니다.","error"),null)));e&&e.data&&e.data.affectedRows>0?g().fire("등록성공","정상적으로 등록되었습니다.","success").then((()=>{this.matList(),this.autoMatCode(),this.clearForm()})):e&&g().fire("등록 실패","등록이 실패하였습니다.","error")},async updateMat(){D.A.put("/api/admin/updateMat",this.rowData).then((e=>{e&&e.data&&1==e.data.result?g().fire("수정 완료","자재정보가 수정되었습니다.","success").then((()=>{this.matList(),this.autoMatCode(),this.clearForm()})):g().fire("수정 실패","자재정보 수정에 실패했습니다.","error")})).catch((e=>{console.error("수정 실패:",e),g().fire("오류 발생","자재정보 수정 중 오류가 발생했습니다.","error")}))},async deleteMat(){this.rowData.mat_code?g().fire({title:"정말 삭제하시겠습니까?",text:`자재 코드: ${this.rowData.mat_code}`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"삭제",cancelButtonText:"취소"}).then((e=>{e.isConfirmed&&D.A.delete(`/api/admin/delMat/${this.rowData.mat_code}`).then((e=>{e&&e.data&&e.data.affectedRows>0?g().fire("삭제 완료","자재정보가 삭제되었습니다.","success").then((()=>{this.facList(),this.clearForm()})):g().fire("삭제 실패","자재 삭제에 실패했습니다.","error")})).catch((e=>{console.error("삭제 오류:",e),g().fire("오류 발생","삭제 중 오류가 발생했습니다.","error")}))})):g().fire("삭제 불가","삭제할 자재를 선택하세요.","warning")}}},x=t(6262);const _=(0,x.A)(v,[["render",k],["__scopeId","data-v-6d939f1e"]]);var C=_}}]);
//# sourceMappingURL=357.fe26efe5.js.map