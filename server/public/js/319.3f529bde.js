"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[319],{8319:function(e,t,a){a.r(t),a.d(t,{default:function(){return q}});var r=a(5122),s=a(641),o=a(33),c=a(3751);const l={class:"card border-0",style:{height:"calc(100vh - 8rem)"}},i={class:"row mt-3 mb-3"},n={class:"col input-group mb-3 w-50"},d=["value"],p={class:"col input-group mb-3 w-50"},u=["value"],h={class:"col input-group mb-3 w-50"},f=["value"],m={class:"mb-3"},_={class:"ag-wrapper justify-content-center",style:{border:"none"}},w={class:"row"},y={class:"col-6"},g={class:"ag-wrapper justify-content-center",style:{border:"none"}},k={class:"col-6"},L={class:"ag-wrapper justify-content-center",style:{border:"none"}},x={class:"d-flex justify-content-center mt-3"};function D(e,t,a,D,v,C){const S=(0,s.g2)("ag-grid-vue"),b=r.A;return(0,s.uX)(),(0,s.CE)("div",l,[t[11]||(t[11]=(0,s.Lk)("h2",null,"공정 진행 관리",-1)),t[12]||(t[12]=(0,s.Lk)("div",{class:"heading-with-line mb-2"},[(0,s.Lk)("h5",{class:"m-0 me-3"},"공정 진행")],-1)),(0,s.Lk)("div",i,[(0,s.Lk)("div",n,[(0,s.bo)((0,s.Lk)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[0]||(t[0]=e=>v.searchType1=e),onChange:t[1]||(t[1]=(...e)=>C.searchSelect&&C.searchSelect(...e))},[t[6]||(t[6]=(0,s.Lk)("option",{value:"none",selected:""},"지시명:전체",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(v.productOrderSelect,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,o.v_)(e),9,d)))),128))],544),[[c.u1,v.searchType1]])]),(0,s.Lk)("div",p,[(0,s.bo)((0,s.Lk)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>v.searchType2=e),onChange:t[3]||(t[3]=(...e)=>C.searchSelect&&C.searchSelect(...e))},[t[7]||(t[7]=(0,s.Lk)("option",{value:"none",selected:""},"공정명:전체",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(v.processSelect,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,o.v_)(e),9,u)))),128))],544),[[c.u1,v.searchType2]])]),(0,s.Lk)("div",h,[(0,s.bo)((0,s.Lk)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[4]||(t[4]=e=>v.searchType3=e),onChange:t[5]||(t[5]=(...e)=>C.searchSelect&&C.searchSelect(...e))},[t[8]||(t[8]=(0,s.Lk)("option",{value:"none",selected:""},"제품명:전체",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(v.productSelect,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,o.v_)(e),9,f)))),128))],544),[[c.u1,v.searchType3]])])]),(0,s.Lk)("div",m,[(0,s.Lk)("div",_,[(0,s.bF)(S,{class:"ag-theme-alpine custom-grid-theme",columnDefs:v.productOrderColDefs,rowData:v.productOrderDataList,gridOptions:v.productOrderGridOptions,onRowClicked:C.productOrderRowClicked},null,8,["columnDefs","rowData","gridOptions","onRowClicked"])])]),(0,s.Lk)("div",w,[(0,s.Lk)("div",y,[t[9]||(t[9]=(0,s.Lk)("h4",{class:"text-start"},"작업자",-1)),(0,s.Lk)("div",g,[(0,s.bF)(S,{class:"ag-theme-alpine custom-grid-theme",columnDefs:v.employeeColDefs,rowData:v.empDataList,gridOptions:v.empGridOptions,onRowClicked:C.empRowClicked},null,8,["columnDefs","rowData","gridOptions","onRowClicked"])])]),(0,s.Lk)("div",k,[t[10]||(t[10]=(0,s.Lk)("h4",{class:"text-start"},"설비",-1)),(0,s.Lk)("div",L,[(0,s.bF)(S,{class:"ag-theme-alpine custom-grid-theme",columnDefs:v.facColDefs,rowData:v.facDataList,gridOptions:v.facGridOptions,onRowClicked:C.facRowClicked},null,8,["columnDefs","rowData","gridOptions","onRowClicked"])])])]),(0,s.Lk)("div",x,[(0,s.bF)(b,{label:"공정 시작",severity:"info",class:"",size:"large",style:{width:"20rem",height:"3.5rem"},onClick:C.startProcess},null,8,["onClick"])])])}a(4114);var v=a(4335),C=a(7654),S=a(8465),b=a.n(S),O={components:{AgGridVue:C.b},data(){return{productOrderDataList:[],empDataList:[],facDataList:[],searchType1:"none",searchType2:"none",searchType3:"none",productOrderSelect:[],processSelect:[],productSelect:[],processData:{},selectedProductOrderRow:null,selectedEmpRow:null,selectedFacRow:null,productOrderColDefs:[{field:"work_lot",headerName:"WORK-LOT",flex:2,cellStyle:{textAlign:"center"}},{field:"product_order_name",headerName:"생산지시명",flex:3,cellStyle:{textAlign:"center"}},{field:"prod_name",headerName:"제품명",flex:3,cellStyle:{textAlign:"center"}},{field:"process_name",headerName:"공정명",flex:3,cellStyle:{textAlign:"center"},cellEditor:"datePicker"},{field:"process_sequence",headerName:"공정순서",flex:2,cellStyle:{textAlign:"center"},cellEditor:"datePicker"},{field:"order_quantity",headerName:"지시량",flex:1.5,cellStyle:{textAlign:"center"}},{field:"input_quantity",headerName:"투입량",flex:1.5,cellStyle:{textAlign:"center"}},{field:"error_quantity",headerName:"불량량",flex:1.5,cellStyle:{textAlign:"center"}},{field:"created_quantity",headerName:"생산량",flex:1.5,cellStyle:{textAlign:"center"}},{field:"work_start_date",headerName:"시작시간",flex:3,cellStyle:{textAlign:"center"}},{field:"work_end_date",headerName:"종료시간",flex:3,cellStyle:{textAlign:"center"}},{field:"finish_status",headerName:"상태",flex:2,valueFormatter:e=>"PP1"===e.value?"생산 대기":"PP2"==e.value?"생산중":"PP3"==e.value?"부분 생산 완료":void 0,cellStyle:e=>"PP1"===e.value?{textAlign:"center",fontWeight:"bold",color:"#6c757d"}:"PP2"==e.value?{textAlign:"center",fontWeight:"bold",color:"#007bff"}:"PP3"==e.value?{textAlign:"center",fontWeight:"bold",color:"#28a745"}:void 0}],employeeColDefs:[{field:"emp_code",headerName:"사번",flex:2,cellStyle:{textAlign:"center"}},{field:"emp_name",headerName:"사원명",flex:2,cellStyle:{textAlign:"center"}},{field:"department_name",headerName:"부서명",flex:2,cellStyle:{textAlign:"center"}}],facColDefs:[{field:"fac_code",headerName:"설비코드",flex:2,cellStyle:{textAlign:"center"}},{field:"model_name",headerName:"설비명",flex:2,cellStyle:{textAlign:"center"}},{field:"fac_status",headerName:"설비상태",flex:2,valueFormatter:e=>"FS1"===e.value?"사용가능":"FS2"==e.value?"사용불가":void 0,cellStyle:e=>({textAlign:"center",color:"white",backgroundColor:"FS1"===e.value?"#0d6efd":"#dc3545",borderRadius:"0.25rem",padding:"4px 8px",display:"flex",justifyContent:"center",alignItems:"center"})},{field:"using",headerName:"WORK-LOT",flex:2,cellStyle:{textAlign:"center"}}],productOrderGridOptions:{domLayout:"autoHeight",singleClickEdit:!0,suppressRowClickSelection:!1,rowSelection:"single",getRowClass:e=>this.selectedProductOrderRow===e.node?"ag-row-selected-custom":"",defaultColDef:{suppressMovable:!0,resizable:!1,sortable:!1}},empGridOptions:{domLayout:"autoHeight",singleClickEdit:!0,suppressRowClickSelection:!1,rowSelection:"single",getRowClass:e=>this.selectedEmpRow===e.node?"ag-row-selected-custom":"",defaultColDef:{suppressMovable:!0,resizable:!1,sortable:!1}},facGridOptions:{domLayout:"autoHeight",singleClickEdit:!0,suppressRowClickSelection:!1,rowSelection:"single",getRowClass:e=>this.selectedFacRow===e.node?"ag-row-selected-custom":"",defaultColDef:{suppressMovable:!0,resizable:!1,sortable:!1}}}},watch(){},mounted(){this.planOrderList(),this.processList(),this.prodList(),this.productOrderList(),this.empList()},methods:{serachReset(){this.processData={},this.selectedProductOrderRow=null,this.selectedEmpRow=null,this.selectedFacRow=null,this.facDataList=[]},async planOrderList(){await v.A.get("/api/work/process/planOrderList").then((e=>{const t=e.data;for(let a of t)this.productOrderSelect.push(a.product_order_name),this.processData={}})).catch((e=>console.error(e)))},async processList(){await v.A.get("/api/work/process/processList").then((e=>{const t=e.data;for(let a of t)this.processSelect.push(a.process_name)})).catch((e=>console.error(e)))},async prodList(){await v.A.get("/api/work/process/prodList").then((e=>{const t=e.data;for(let a of t)this.productSelect.push(a.prod_name)})).catch((e=>console.error(e)))},async searchSelect(){const e={};this.searchType1&&"none"!==this.searchType1&&(e.product_order_name=this.searchType1),this.searchType2&&"none"!==this.searchType2&&(e.process_name=this.searchType2),this.searchType3&&"none"!==this.searchType3&&(e.prod_name=this.searchType3),await v.A.get("/api/work/process/productOrderList",{params:e}).then((e=>{const t=e.data;this.productOrderDataList=[...t]})).catch((e=>console.error(e)))},async productOrderList(){await v.A.get("/api/work/process/productOrderList").then((e=>{const t=e.data;for(let a of t)this.productOrderDataList.push({work_lot:a.work_lot,product_order_code:a.product_order_code,product_order_name:a.product_order_name,prod_name:a.prod_name,process_code:a.process_code,process_name:a.process_name,process_sequence:a.process_sequence,order_quantity:a.order_quantity,input_quantity:a.input_quantity,created_quantity:a.created_quantity,error_quantity:a.error_quantity,work_start_date:a.work_start_date,work_end_date:a.work_end_date,finish_status:a.finish_status,fac_code:a.fac_code})})).catch((e=>console.error(e)))},async empList(){await v.A.get("/api/work/process/empList").then((e=>{const t=e.data;this.empDataList=[...t]})).catch((e=>console.error(e)))},async productOrderRowClicked(e){await v.A.get(`/api/work/process/facList/${e.data.work_lot}`).then((t=>{const a=t.data;this.facDataList=[];for(let r of a)this.facDataList.push({fac_code:r.fac_code,model_name:r.model_name,fac_status:r.fac_status,using:e.data.fac_code===r.fac_code?e.data.work_lot:""});this.facDataList=[...this.facDataList]})).catch((e=>console.error(e))),this.processData.process={work_lot:e.data.work_lot,product_order_name:e.data.product_order_code,prod_name:e.data.prod_name,process_code:e.data.process_code,process_name:e.data.process_name,process_sequence:e.data.process_sequence,order_quantity:e.data.order_quantity,input_quantity:e.data.input_quantity,created_quantity:e.data.created_quantity,error_quantity:e.data.error_quantity,work_start_date:e.data.work_start_date,work_end_date:e.data.work_end_date,finish_status:e.data.finish_status}},empRowClicked(e){this.processData.emp={emp_code:e.data.emp_code,emp_name:e.data.emp_name,department_name:e.data.department_name}},facRowClicked(e){this.processData.fac={fac_code:e.data.fac_code,model_name:e.data.model_name,fac_status:e.data.fac_status,using:e.data.using}},startProcess(){this.processData.process?this.processData.emp?this.processData.fac?"FS2"!==this.processData.fac.fac_status||this.processData.process.work_lot!=this.processData.fac.fac_code?this.$router.push({name:"Control",query:{work_lot:this.processData.process.work_lot,emp_code:this.processData.emp.emp_code,fac_code:this.processData.fac.fac_code}}):b().fire({title:"오류",text:"사용불가 상태의 설비입니다.",icon:"error",confirmButtonText:"확인"}):b().fire({title:"오류",text:"설비를 선택하세요.",icon:"error",confirmButtonText:"확인"}):b().fire({title:"오류",text:"작업자를 선택하세요.",icon:"error",confirmButtonText:"확인"}):b().fire({title:"오류",text:"공정을 선택하세요.",icon:"error",confirmButtonText:"확인"})}}},A=a(6262);const R=(0,A.A)(O,[["render",D]]);var q=R}}]);
//# sourceMappingURL=319.3f529bde.js.map