"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[371],{371:function(e,t,r){r.r(t),r.d(t,{default:function(){return F}});var a=r(5122),o=r(641),s=r(33),c=r(3751);const l={class:"card border-0",style:{height:"calc(58vh - 5.8rem)"}},i={class:"row"},n={class:"col input-group mb-3 w-50"},d=["value"],p={class:"col input-group mb-3 w-50"},u=["value"],h={class:"col input-group mb-3 w-50"},f=["value"],m={class:"mb-3"},g={class:"ag-wrapper justify-content-center"},_={class:"row"},w={class:"col"},y={class:"card border-0",style:{height:"calc(42vh - 4.2rem)"}},k={class:"ag-wrapper justify-content-center"},v={class:"col"},x={class:"card border-0",style:{height:"calc(42vh - 4.2rem)"}},L={class:"ag-wrapper justify-content-center"},D={class:"d-flex justify-content-center"};function S(e,t,r,S,C,b){const O=(0,o.g2)("ag-grid-vue"),R=a.A;return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",l,[t[9]||(t[9]=(0,o.Lk)("h3",null,"공정 진행 관리",-1)),t[10]||(t[10]=(0,o.Lk)("div",{class:"heading-with-line mb-2"},[(0,o.Lk)("h5",{class:"m-0 me-3"},"공정 진행")],-1)),(0,o.Lk)("div",i,[(0,o.Lk)("div",n,[(0,o.bo)((0,o.Lk)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[0]||(t[0]=e=>C.searchType1=e),onChange:t[1]||(t[1]=(...e)=>b.searchSelect&&b.searchSelect(...e))},[t[6]||(t[6]=(0,o.Lk)("option",{value:"none",selected:""},"지시명:전체",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(C.productOrderSelect,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,s.v_)(e),9,d)))),128))],544),[[c.u1,C.searchType1]])]),(0,o.Lk)("div",p,[(0,o.bo)((0,o.Lk)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>C.searchType2=e),onChange:t[3]||(t[3]=(...e)=>b.searchSelect&&b.searchSelect(...e))},[t[7]||(t[7]=(0,o.Lk)("option",{value:"none",selected:""},"공정명:전체",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(C.processSelect,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,s.v_)(e),9,u)))),128))],544),[[c.u1,C.searchType2]])]),(0,o.Lk)("div",h,[(0,o.bo)((0,o.Lk)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[4]||(t[4]=e=>C.searchType3=e),onChange:t[5]||(t[5]=(...e)=>b.searchSelect&&b.searchSelect(...e))},[t[8]||(t[8]=(0,o.Lk)("option",{value:"none",selected:""},"제품명:전체",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(C.productSelect,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,s.v_)(e),9,f)))),128))],544),[[c.u1,C.searchType3]])])]),(0,o.Lk)("div",m,[(0,o.Lk)("div",g,[(0,o.bF)(O,{class:"ag-theme-alpine custom-grid-theme",columnDefs:C.productOrderColDefs,rowData:C.productOrderDataList,gridOptions:C.productOrderGridOptions,onRowClicked:b.productOrderRowClicked},null,8,["columnDefs","rowData","gridOptions","onRowClicked"])])])]),(0,o.Lk)("div",_,[(0,o.Lk)("div",w,[(0,o.Lk)("div",y,[t[11]||(t[11]=(0,o.Lk)("div",{class:"heading-with-line"},[(0,o.Lk)("h5",{class:"me-3"},"작업자")],-1)),(0,o.Lk)("div",k,[(0,o.bF)(O,{class:"ag-theme-alpine custom-grid-theme",columnDefs:C.employeeColDefs,rowData:C.empDataList,gridOptions:C.empGridOptions,onRowClicked:b.empRowClicked},null,8,["columnDefs","rowData","gridOptions","onRowClicked"])])])]),(0,o.Lk)("div",v,[(0,o.Lk)("div",x,[t[12]||(t[12]=(0,o.Lk)("div",{class:"heading-with-line"},[(0,o.Lk)("h5",{class:"me-3"},"설비")],-1)),(0,o.Lk)("div",L,[(0,o.bF)(O,{class:"ag-theme-alpine custom-grid-theme",columnDefs:C.facColDefs,rowData:C.facDataList,gridOptions:C.facGridOptions,onRowClicked:b.facRowClicked},null,8,["columnDefs","rowData","gridOptions","onRowClicked"])])])])]),(0,o.Lk)("div",D,[(0,o.bF)(R,{label:"공정 시작",severity:"info",class:"",size:"large",style:{width:"20rem",height:"3.5rem"},onClick:b.startProcess},null,8,["onClick"])])],64)}r(4114),r(8111),r(2489);var C=r(4335),b=r(7654),O=r(8465),R=r.n(O),A={components:{AgGridVue:b.b},data(){return{productOrderDataList:[],empDataList:[],facDataList:[],searchType1:"none",searchType2:"none",searchType3:"none",productOrderSelect:[],processSelect:[],productSelect:[],processData:{},selectedProductOrderRow:null,selectedEmpRow:null,selectedFacRow:null,productOrderColDefs:[{field:"work_lot",headerName:"WORK-LOT",flex:3,cellStyle:{textAlign:"center"}},{field:"product_order_name",headerName:"생산지시명",flex:3,cellStyle:{textAlign:"center"}},{field:"prod_name",headerName:"제품명",flex:3,cellStyle:{textAlign:"center"}},{field:"process_name",headerName:"공정명",flex:3,cellStyle:{textAlign:"center"},cellEditor:"datePicker"},{field:"process_sequence",headerName:"공정순서",flex:2,cellStyle:{textAlign:"center"},cellEditor:"datePicker"},{field:"order_quantity",headerName:"지시량",flex:1.5,cellStyle:{textAlign:"center"}},{field:"input_quantity",headerName:"투입량",flex:1.5,cellStyle:{textAlign:"center"}},{field:"error_quantity",headerName:"불량량",flex:1.5,cellStyle:{textAlign:"center"}},{field:"created_quantity",headerName:"생산량",flex:1.5,cellStyle:{textAlign:"center"}},{field:"work_start_date",headerName:"시작시간",flex:3,cellStyle:{textAlign:"center"}},{field:"work_end_date",headerName:"종료시간",flex:3,cellStyle:{textAlign:"center"}},{field:"finish_status",headerName:"상태",flex:2,valueFormatter:e=>"PP1"===e.value?"생산 대기":"PP2"==e.value?"생산중":"PP3"==e.value?"부분 생산 완료":void 0,cellStyle:e=>"PP1"===e.value?{textAlign:"center",fontWeight:"bold",color:"#6c757d"}:"PP2"==e.value?{textAlign:"center",fontWeight:"bold",color:"#007bff"}:"PP3"==e.value?{textAlign:"center",fontWeight:"bold",color:"#28a745"}:void 0}],employeeColDefs:[{field:"emp_code",headerName:"사번",flex:2,cellStyle:{textAlign:"center"}},{field:"emp_name",headerName:"사원명",flex:2,cellStyle:{textAlign:"center"}},{field:"department_name",headerName:"부서명",flex:2,cellStyle:{textAlign:"center"}}],facColDefs:[{field:"fac_code",headerName:"설비코드",flex:2,cellStyle:{textAlign:"center"}},{field:"model_name",headerName:"설비명",flex:2,cellStyle:{textAlign:"center"}},{field:"fac_status",headerName:"설비상태",flex:2,valueFormatter:e=>"FS1"===e.value?"사용가능":"FS2"==e.value?"사용불가":void 0,cellStyle:e=>({textAlign:"center",color:"white",backgroundColor:"FS1"===e.value?"#0d6efd":"#dc3545",borderRadius:"0.25rem",padding:"4px 8px",display:"flex",justifyContent:"center",alignItems:"center"})},{field:"using",headerName:"WORK-LOT",flex:2,cellStyle:{textAlign:"center"},hide:!0}],productOrderGridOptions:{domLayout:"autoHeight",singleClickEdit:!0,suppressRowClickSelection:!1,rowSelection:"single",pagination:!0,paginationPageSize:4,paginationPageSizeSelector:!1,getRowClass:e=>this.selectedProductOrderRow===e.node?"ag-row-selected-custom":"",defaultColDef:{suppressMovable:!0,resizable:!1,sortable:!1}},empGridOptions:{domLayout:"autoHeight",singleClickEdit:!0,suppressRowClickSelection:!1,rowSelection:"single",pagination:!0,paginationPageSize:3,paginationPageSizeSelector:!1,getRowClass:e=>this.selectedEmpRow===e.node?"ag-row-selected-custom":"",defaultColDef:{suppressMovable:!0,resizable:!1,sortable:!1}},facGridOptions:{domLayout:"autoHeight",singleClickEdit:!0,suppressRowClickSelection:!1,rowSelection:"single",pagination:!0,paginationPageSize:3,paginationPageSizeSelector:!1,getRowClass:e=>this.selectedFacRow===e.node?"ag-row-selected-custom":"",defaultColDef:{suppressMovable:!0,resizable:!1,sortable:!1}}}},watch(){},mounted(){this.planOrderList(),this.processList(),this.prodList(),this.productOrderList(),this.empList()},methods:{serachReset(){this.processData={},this.selectedProductOrderRow=null,this.selectedEmpRow=null,this.selectedFacRow=null,this.facDataList=[]},async planOrderList(){await C.A.get("/api/work/process/planOrderList").then((e=>{const t=e.data;for(let r of t)this.productOrderSelect.push(r.product_order_name),this.processData={}})).catch((e=>console.error(e)))},async processList(){await C.A.get("/api/work/process/processList").then((e=>{const t=e.data;for(let r of t)this.processSelect.push(r.process_name)})).catch((e=>console.error(e)))},async prodList(){await C.A.get("/api/work/process/prodList").then((e=>{const t=e.data;for(let r of t)this.productSelect.push(r.prod_name)})).catch((e=>console.error(e)))},async searchSelect(){const e={};this.searchType1&&"none"!==this.searchType1&&(e.product_order_name=this.searchType1),this.searchType2&&"none"!==this.searchType2&&(e.process_name=this.searchType2),this.searchType3&&"none"!==this.searchType3&&(e.prod_name=this.searchType3),await C.A.get("/api/work/process/productOrderList",{params:e}).then((e=>{const t=e.data;this.productOrderDataList=[...t]})).catch((e=>console.error(e)))},async productOrderList(){await C.A.get("/api/work/process/productOrderList").then((e=>{const t=e.data;for(let r of t)this.productOrderDataList.push({work_lot:r.work_lot,product_order_code:r.product_order_code,product_order_name:r.product_order_name,prod_name:r.prod_name,process_code:r.process_code,process_name:r.process_name,process_sequence:r.process_sequence,order_quantity:r.order_quantity,input_quantity:r.input_quantity,created_quantity:r.created_quantity,error_quantity:r.error_quantity,work_start_date:r.work_start_date,work_end_date:r.work_end_date,finish_status:r.finish_status,fac_code:r.fac_code})})).catch((e=>console.error(e)))},async empList(){await C.A.get("/api/work/process/empList").then((e=>{const t=e.data;this.empDataList=[...t]})).catch((e=>console.error(e)))},async productOrderRowClicked(e){await C.A.get(`/api/work/process/facList/${e.data.work_lot}`).then((t=>{const r=t.data;this.facDataList=[];for(let a of r)this.facDataList.push({fac_code:a.fac_code,model_name:a.model_name,fac_status:a.fac_status,using:e.data.fac_code===a.fac_code?e.data.work_lot:""});this.facDataList=[...this.facDataList]})).catch((e=>console.error(e))),this.processData.process=this.productOrderDataList.filter((t=>t.work_lot===e.data.work_lot))[0]},empRowClicked(e){this.processData.emp={emp_code:e.data.emp_code,emp_name:e.data.emp_name,department_name:e.data.department_name}},facRowClicked(e){return console.log(e.data.using),console.log(this.processData.process.fac_code),console.log(this.processData.process.work_lot),console.log(this.processData.process.fac_code),this.processData.process.fac_code&&""===e.data.using&&e.data.using!==this.processData.process.work_lot&&"FS1"===e.data.fac_status?(R().fire({title:"오류",html:"사용 중이던 설비와 일치하지 않습니다.<br>기존에 사용 중이던 설비를 사용하세요.<br>사용 중인 설비: "+this.processData.process.fac_code+"<br>",icon:"error",confirmButtonText:"확인"}),void e.node.setSelected(!1)):"FS2"===e.data.fac_status&&e.data.using!==this.processData.process.work_lot?(R().fire({title:"오류",text:"사용불가 상태의 설비입니다.",icon:"error",confirmButtonText:"확인"}),void e.node.setSelected(!1)):void(this.processData.fac={fac_code:e.data.fac_code,model_name:e.data.model_name,fac_status:e.data.fac_status,using:e.data.using})},startProcess(){this.processData.process?this.processData.emp?this.processData.fac?this.$router.push({name:"Control",query:{work_lot:this.processData.process.work_lot,emp_code:this.processData.emp.emp_code,fac_code:this.processData.fac.fac_code}}):R().fire({title:"오류",text:"설비를 선택하세요.",icon:"error",confirmButtonText:"확인"}):R().fire({title:"오류",text:"작업자를 선택하세요.",icon:"error",confirmButtonText:"확인"}):R().fire({title:"오류",text:"공정을 선택하세요.",icon:"error",confirmButtonText:"확인"})}}},T=r(6262);const P=(0,T.A)(A,[["render",S]]);var F=P},2489:function(e,t,r){var a=r(6518),o=r(9565),s=r(9306),c=r(8551),l=r(1767),i=r(9462),n=r(6319),d=r(6395),p=r(9539),u=r(4549),h=!d&&u("filter",TypeError),f=i((function(){var e,t,r,a=this.iterator,s=this.predicate,l=this.next;while(1){if(e=c(o(l,a)),t=this.done=!!e.done,t)return;if(r=e.value,n(a,s,[r,this.counter++],!0))return r}}));a({target:"Iterator",proto:!0,real:!0,forced:d||h},{filter:function(e){c(this);try{s(e)}catch(t){p(this,"throw",t)}return h?o(h,this,e):new f(l(this),{predicate:e})}})},2529:function(e){e.exports=function(e,t){return{value:e,done:t}}},6279:function(e,t,r){var a=r(6840);e.exports=function(e,t,r){for(var o in t)a(e,o,t[o],r);return e}},6319:function(e,t,r){var a=r(8551),o=r(9539);e.exports=function(e,t,r,s){try{return s?t(a(r)[0],r[1]):t(r)}catch(c){o(e,"throw",c)}}},9462:function(e,t,r){var a=r(9565),o=r(2360),s=r(6699),c=r(6279),l=r(8227),i=r(1181),n=r(5966),d=r(7657).IteratorPrototype,p=r(2529),u=r(9539),h=l("toStringTag"),f="IteratorHelper",m="WrapForValidIterator",g=i.set,_=function(e){var t=i.getterFor(e?m:f);return c(o(d),{next:function(){var r=t(this);if(e)return r.nextHandler();if(r.done)return p(void 0,!0);try{var a=r.nextHandler();return r.returnHandlerResult?a:p(a,r.done)}catch(o){throw r.done=!0,o}},return:function(){var r=t(this),o=r.iterator;if(r.done=!0,e){var s=n(o,"return");return s?a(s,o):p(void 0,!0)}if(r.inner)try{u(r.inner.iterator,"normal")}catch(c){return u(o,"throw",c)}return o&&u(o,"normal"),p(void 0,!0)}})},w=_(!0),y=_(!1);s(y,h,"Iterator Helper"),e.exports=function(e,t,r){var a=function(a,o){o?(o.iterator=a.iterator,o.next=a.next):o=a,o.type=t?m:f,o.returnHandlerResult=!!r,o.nextHandler=e,o.counter=0,o.done=!1,g(this,o)};return a.prototype=t?w:y,a}}}]);
//# sourceMappingURL=371.84933c05.js.map